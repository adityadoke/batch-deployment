queues:
  - name: optimus-morningstar-poller
    state: enabled
    priority: 1
    compute_environments:
      - name: optimus-morningstar-poller
        order: 1

compute_environments:
  - name: optimus-morningstar-poller
    type: managed
    state: enabled
    serviceRole: arn:aws:iam::752320408524:role/service-role/AWSBatchServiceRole
    compute_resources:
        type: ec2
        instanceRole: arn:aws:iam::752320408524:instance-profile/ecsInstanceRole
        instanceTypes:
          - optimal
        maxvCpus: 256
        minvCpus: 0
        desiredvCpus: 0
        ec2KeyPair: asdev
        securityGroupIds:
          - sg-3969274c
        subnets:
          - subnet-bbef4de6
        tags:
            environment: optimus

job_definitions:
  - name: optimus-morningstar-poller
    container:
        image: 752320408524.dkr.ecr.us-east-1.amazonaws.com/morning-star-poller:1.0-SNAPSHOT 
        jobRoleArn: arn:aws:iam::752320408524:role/morningstar_batchjob_role
        memory: 1000
        vcpus: 1
    retryStrategy:
        attempts: 3
